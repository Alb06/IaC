# =============================================================================
# JOBS DE SYNCHRONISATION GITHUB (VERSION REFACTORISÃ‰E)
# =============================================================================

# Synchronisation vers GitHub
mirror_to_github:
  extends: 
    - .setup_ssh
    - .base_sync
    - .rules_sync
  image: alpine:latest
  before_script:
    - apk add --no-cache bash
  script:
    - echo "ðŸ”„ Synchronisation vers GitHub..."
    - git remote add mirror git@github.com:Alb06/IaC.git || true
    - git push mirror HEAD:main --force
    - echo "âœ… Synchronisation terminÃ©e"
  needs: []

# Synchronisation des issues
sync_issues_to_github:
  extends: 
    - .base_sync
    - .rules_sync
  image: python:3.11
  before_script:
    - pip install requests
  script:
    - echo "ðŸ”„ Synchronisation des issues GitLab â†’ GitHub..."
    - python scripts/ci-cd/sync_issues.py
  needs: []